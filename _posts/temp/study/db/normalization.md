## 정규화(Normalization)
정규화란 데이터 모델을 좀 더 구조화하고 개선시켜 나가는 절차에 관련된 이론이다.<br>
정규화의 기본 원칙은 <u>하나의 테이블에는 중복된 데이터가 없도록 하는 것</u>이다.<br>
- 불필요한(중복되는) 데이터를 제거
- 논리적인 테이블 구성 
    - 이상 현상을 방지 

### 이상(Anomaly)
정규화가 되지 않은 테이블의 경우, 데이터 핸들링 시 다음과 같은 이상현상이 발생할 수 있다. 
- 삽입 이상(Insertion Anomaly)
    - 새 데이터를 삽입하기 위해 불필요한 데이터도 함께 삽입해야 하는 문제
    - 필요 없을 수 있는 데이터가 PK인 경우 
- 수정 이상(Update Anomaly)
    - 중복 튜플 중 일부만 변경하여 데이터가 불일치하게 되는 문제
- 삭제 이상(Deletion Anomaly)
    - 튜플을 삭제하면 꼭 필요한 데이터까지 함께 삭제되는 데이터 손실의 문제 

### 함수 종속성(Functional Dependency)
X의 값을 알면 Y의 값을 바로 식별할 수 있고, X의 값에 Y의 값이 달라질 때, Y는 X에 함수적 종속이라고 한다. 
- 결정자(Determinant): 기준값
- 종속자(Depedent): 종속되는 값 

```
주민등록번호 -> (이름, 출생지, 주소)
```

'주민등록번호'를 알면 '이름', '출생지', '주소' 속성을 식별할 수 있으며, '주민등록번호'가 다르면 그에 따른 값도 다르다. 

### 정규화의 종류 
|정규화 종류|내용|
|-|-|
|1차 정규화|복수의 속성값을 갖는 속성을 분리|
|2차 정규화|PK에 종속적이지 않은 속성의 분리<br>부분 종석 속성을 분리|
|3차 정규화|속성에 종속적인 속성의 분리<br>이전 종속 속성의 분리|
|보이스-코드 정규화|다수의 주식별자 분리|
|4차 정규화|다가 종속 속성 분리|
|5차 정규화|결합 종속일 경우는 N(>=2)개로 분리|

#### 1차 정규화
- 복수의 속성값을 가진 속성을 별도의 엔티티타입으로 분리
    - 하나의 컬럼에는 여러 개의 데이터값이 중복으로 나타나면 안됨

#### 2차 정규화
- 각각의 속성들은 자신이 속한 테이블의 PK에 완전히 종속적이어야 함
- PK의 일부 속성들에만 종속적인 속성들을 분리해 별도의 테이블을 구성

#### 3차 정규화
- PK에 종속적인 속성 중 다른 속성을 결정하는 결정자가 존재하는 것
    - 이를 분리해 별도의 테이블로 구성

#### 보이스-코드 정규화
- PK가 여러 개 존재할 경우 PK가 중복되어 나타나는 현상을 제거
    - 1, 2, 3차 정규화는 모두 PK가 하나인 경우 
- PK 외 중복으로 나타나는 속성값을 분리 

|납품 업체 코드|납품 회사명|제품 코드|납품 수량|납품 단가|
|-|-|-|-|-|
|01|사반|B001|10|20,000|
|01|사반|A011|12|40,000|
|01|사반|A012|12|30,000|
|02|시그마|B001|5|20,000|
|02|시그마|A011|20|70,000|

위 표에서 PK 후보는 '납품 업체 코드 + 제품 코드' 또는 '납품 회사명 + 제품 코드'가 될 수 있다.
이 중 '납품 업체 코드 + 제품 코드'를 PK로 지정하면 3차 정규형은 만족하지만, 납품 회사명이 중복으로 나타나 이상 현상이 문제가 된다. 

이 경우 테이블에 PK로 관여하는 결정자를 묶어 하나의 테이블로 분리하고 PK 후보 중 하나만 남겨둔 나머지 테이블을 구성한다. 

#### 4차 정규화
- 하나의 테이블에 두 개 이상의 독립적인 다가 속성(Multi-Valued Attribute)이 존재하는 경우 문제 발생
    - 다가 속성들 간에 종속 관계가 없어야 4차 정규화 대상임 
    - 다가 종속(Multi-Valued Dependency)이 발생됨

|사원 번호|기술 코드|프로젝트 코드|
|-|-|-|
|10|MODELING|SI|
|10|DBA|OO|
|10|DBA|PA|
|20|DBA|PA|
|20|XML|PA|

```
사원 번호 -> 기술 코드 / 사원 번호 -> 프로젝트 코드 
```

'기술 코드'와 '프로젝트 코드'는 아무런 종속성이 없지만, 두 속성 다 '사원 번호'라는 속성에 종속적이다. 

 
#### Reference
함수적 종속 - <https://dodo000.tistory.com/20><br>
정규화 <https://3months.tistory.com/193><br>

