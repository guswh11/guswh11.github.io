---
layout: post
title: "220110 AIS 진행상황"
categories: [ais]
comments: true
tags:
  - AIS
---
### 0110 데이터 분석

고객 측에서 분리 결과에 대해 문의했었던 imo_no에 대한 운영서버 분리 결과이다.<br>
1월 11일 저녁 서버 재기동이 한 차례 있었다. 

**주 개선사항**
- 리빌딩 이후 클러스터 분화 현상 제거
    - 클러스터 별 리스트 시작-끝 날짜를 저장함으로써 리빌딩 시 과거 시간대의 데이터를 들고오는 현상 방지
- 클러스터 merge 로직에서 합쳐질 클러스터 선택 오류 수정 (가까운 클러스터로 위치데이터가 포함되지 않던 현상 제거)

세 데이터 모두 03코드 데이터 수 정상(=19)

**IMO_NO : 9527037**<br>
2022-01-04 19:30:09 ~ 2022-01-13 22:11:15<br>
3,394 데이터

![9527037-before](9527037-before.png)
![9527037-after](9527037-after.png)

**IMO_NO : 9839480**<br>
2022-01-05 04:40:49 ~ 2022-01-13 22:16:18<br>
329 데이터

![9839480-before](9839480-before.png)
![9839480-after](9839480-after.png)

**IMO_NO : 8773237**<br>
2022-01-04 19:36:31 ~ 2022-01-13 22:16:28<br>
3,879 데이터

![8773237-before](8773237-before.png)
![8773237-after](8773237-after.png)

| 8773237_1 | 8773237_2 |
| -- | -- |
| 2022-01-05 04:03:40 ~ 2022-01-12 16:56:32<br>1,566 데이터 | 2022-01-05 13:13:04 ~ 2022-01-13 22:16:28<br>2,146 데이터 |
| ![8773237_1](8773237_1.png) | ![8773237_2](8773237_2.png) |

- 클러스터 수는 맞으나(mmsi 수가 2개인 데이터임), 완벽하게 분리되지는 않음
  <br>(_1, _2 모두 좌측에 작은 무지개형 경로가 존재)
  <br>튄 데이터 위치가 약 20-35km 이내로 분 단위 내로 충분히 갈 수 있는 거리라, 분리 불가
- 경로 분리 시 다른 key를 고려하는 로직을 넣어준다면 해결할 수 있을 것으로 생각됨


mmsi를 따라 분리됐을 경우의 결과 (리빌딩 이전)
![8773237-mmsi](8773237-mmsi.png)
